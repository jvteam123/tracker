<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Tool Converter</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom focus style for inputs */
        input[type="number"] {
            -moz-appearance: textfield; /* Firefox */
        }
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input:focus {
            outline: none;
            border-color: #4f46e5; /* indigo-600 */
            box-shadow: 0 0 0 2px #a5b4fc; /* indigo-200 */
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 min-h-screen flex items-center justify-center p-8">

    <div class="w-full max-w-6xl grid grid-cols-1 lg:grid-cols-2 gap-8">
        
        <!-- CARD 1: MINUTES TO DECIMAL CONVERTER -->
        <div id="timeConverterCard" class="bg-white/90 backdrop-blur-lg p-6 md:p-8 rounded-2xl shadow-2xl h-full">
            <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">
                Minutes to Decimal Converter
            </h1>
            <p class="text-center text-gray-600 mb-8">Enter a time duration in any field to convert.</p>

            <!-- Standard Time Section -->
            <div class="mb-6">
                <h2 class="text-lg font-semibold text-gray-700 mb-3">Standard Time</h2>
                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label for="std_h" class="block text-sm font-medium text-gray-600 mb-1">Hours</label>
                        <input type="number" id="std_h" min="0" placeholder="e.g., 1" class="w-full p-3 rounded-lg border border-gray-300 text-lg transition duration-200">
                    </div>
                    <div>
                        <label for="std_m" class="block text-sm font-medium text-gray-600 mb-1">Minutes</label>
                        <input type="number" id="std_m" min="0" placeholder="e.g., 30" class="w-full p-3 rounded-lg border border-gray-300 text-lg transition duration-200">
                    </div>
                </div>
            </div>

            <!-- Total Minutes Section -->
            <div class="mb-6">
                <h2 class="text-lg font-semibold text-gray-700 mb-3">Total Minutes</h2>
                <div>
                    <label for="total_m" class="block text-sm font-medium text-gray-600 mb-1 sr-only">Total Minutes</label>
                    <input type="number" id="total_m" min="0" placeholder="e.g., 90" class="w-full p-3 rounded-lg border border-gray-300 text-lg transition duration-200">
                </div>
            </div>

            <!-- Decimal Hours Section -->
            <div class="mb-8">
                <h2 class="text-lg font-semibold text-gray-700 mb-3">Decimal Hours</h2>
                <div>
                    <label for="dec_h" class="block text-sm font-medium text-gray-600 mb-1 sr-only">Decimal Hours</label>
                    <input type="number" id="dec_h" min="0" placeholder="e.g., 1.5" class="w-full p-3 rounded-lg border border-gray-300 text-lg transition duration-200">
                </div>
            </div>

            <!-- "Clear" Button for Time Converter -->
            <button id="clearTimeBtn" class="w-full bg-indigo-600 text-white p-3 rounded-lg font-semibold text-lg hover:bg-indigo-700 active:bg-indigo-800 transition duration-300 shadow-lg hover:shadow-indigo-500/50">
                Clear Time Fields
            </button>
        </div>

        <!-- CARD 2: PERCENTAGE CALCULATOR -->
        <div id="percentageCalculatorCard" class="bg-white/90 backdrop-blur-lg p-6 md:p-8 rounded-2xl shadow-2xl h-full">
            <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">
                Percentage Calculator
            </h1>
            <p class="text-center text-gray-600 mb-8">Calculate percentages in two common ways.</p>

            <!-- Calculation 1: What is X% of Y? -->
            <div class="mb-8 p-4 border border-indigo-200 rounded-xl bg-indigo-50">
                <h2 class="text-xl font-bold text-indigo-700 mb-4">Percentage of a Number</h2>
                <p class="text-sm text-gray-600 mb-3">What is <span class="font-bold">[A]%</span> of <span class="font-bold">[B]</span>?</p>
                <div class="flex items-center space-x-2 mb-3">
                    <input type="number" id="perc_a" placeholder="%" class="w-1/3 p-3 rounded-lg border border-gray-300 text-lg text-center transition duration-200" min="0">
                    <span class="text-2xl font-light text-gray-500">% of</span>
                    <input type="number" id="perc_b" placeholder="Number" class="w-2/3 p-3 rounded-lg border border-gray-300 text-lg transition duration-200" min="0">
                </div>
                <div class="text-center text-2xl font-semibold text-gray-700 mt-4">
                    Result: <span id="perc_result_c" class="text-pink-600">0.00</span>
                </div>
            </div>

            <!-- Calculation 2: X is what percent of Y? -->
            <div class="mb-8 p-4 border border-purple-200 rounded-xl bg-purple-50">
                <h2 class="text-xl font-bold text-purple-700 mb-4">Ratio as Percentage</h2>
                <p class="text-sm text-gray-600 mb-3"><span class="font-bold">[X]</span> is what percent of <span class="font-bold">[Y]</span>?</p>
                <div class="flex items-center space-x-2 mb-3">
                    <input type="number" id="perc_x" placeholder="X" class="w-1/3 p-3 rounded-lg border border-gray-300 text-lg text-center transition duration-200">
                    <span class="text-2xl font-light text-gray-500">is what % of</span>
                    <input type="number" id="perc_y" placeholder="Y" class="w-2/3 p-3 rounded-lg border border-gray-300 text-lg transition duration-200" min="1">
                </div>
                <div class="text-center text-2xl font-semibold text-gray-700 mt-4">
                    Result: <span id="perc_result_z" class="text-pink-600">0.00%</span>
                </div>
            </div>

             <!-- "Clear" Button for Percentage Calculator -->
            <button id="clearPercBtn" class="w-full bg-purple-600 text-white p-3 rounded-lg font-semibold text-lg hover:bg-purple-700 active:bg-purple-800 transition duration-300 shadow-lg hover:shadow-purple-500/50">
                Clear Percentage Fields
            </button>
        </div>
        
    </div>

    <script>
        // --- Time Converter Elements ---
        const std_h = document.getElementById('std_h');
        const std_m = document.getElementById('std_m');
        const total_m = document.getElementById('total_m');
        const dec_h = document.getElementById('dec_h');
        const clearTimeBtn = document.getElementById('clearTimeBtn');
        const TIME_STORAGE_KEY = 'decimalConverterLastValue';

        // --- Percentage Calculator Elements ---
        const perc_a = document.getElementById('perc_a');
        const perc_b = document.getElementById('perc_b');
        const perc_result_c = document.getElementById('perc_result_c');
        const perc_x = document.getElementById('perc_x');
        const perc_y = document.getElementById('perc_y');
        const perc_result_z = document.getElementById('perc_result_z');
        const clearPercBtn = document.getElementById('clearPercBtn');


        // --- Event Listeners ---

        // Time Converter Listeners
        std_h.addEventListener('input', updateFromStandard);
        std_m.addEventListener('input', updateFromStandard);
        total_m.addEventListener('input', updateFromTotalMinutes);
        dec_h.addEventListener('input', updateFromDecimalHours);
        clearTimeBtn.addEventListener('click', clearTimeFields);

        // Percentage Calculator Listeners
        perc_a.addEventListener('input', calculatePercentageOfNumber);
        perc_b.addEventListener('input', calculatePercentageOfNumber);
        perc_x.addEventListener('input', calculateRatioPercentage);
        perc_y.addEventListener('input', calculateRatioPercentage);
        clearPercBtn.addEventListener('click', clearPercentageFields);


        // ===================================================
        // --- TIME CONVERTER LOGIC ---
        // ===================================================

        /**
         * Updates all fields based on Standard Time (Hours and Minutes)
         */
        function updateFromStandard() {
            const h = parseFloat(std_h.value) || 0;
            const m = parseFloat(std_m.value) || 0;

            const totalMinutes = (h * 60) + m;
            const decimalHours = totalMinutes / 60;

            // Update other fields without triggering their listeners
            setInputValue(total_m, totalMinutes);
            setInputValue(dec_h, formatDecimal(decimalHours));
            saveData(totalMinutes);
        }

        /**
         * Updates all fields based on Total Minutes
         */
        function updateFromTotalMinutes() {
            const totalMinutes = parseFloat(total_m.value) || 0;

            const h = Math.floor(totalMinutes / 60);
            const m = totalMinutes % 60;
            const decimalHours = totalMinutes / 60;

            // Update other fields
            setInputValue(std_h, h);
            setInputValue(std_m, m);
            setInputValue(dec_h, formatDecimal(decimalHours));
            saveData(totalMinutes);
        }

        /**
         * Updates all fields based on Decimal Hours
         */
        function updateFromDecimalHours() {
            const decimalHours = parseFloat(dec_h.value) || 0;

            const totalMinutes = decimalHours * 60;
            const h = Math.floor(totalMinutes / 60);
            // Round minutes to avoid floating point issues (e.g., 1.5 hours = 90.000001 min)
            const m = Math.round(totalMinutes % 60);

            // Update other fields
            setInputValue(std_h, h);
            setInputValue(std_m, m);
            const roundedTotalMinutes = Math.round(totalMinutes);
            setInputValue(total_m, roundedTotalMinutes);
            saveData(roundedTotalMinutes);
        }

        /**
         * Clears all Time Converter input fields.
         */
        function clearTimeFields() {
            std_h.value = '';
            std_m.value = '';
            total_m.value = '';
            dec_h.value = '';
            localStorage.removeItem(TIME_STORAGE_KEY);
        }


        // ===================================================
        // --- PERCENTAGE CALCULATOR LOGIC ---
        // ===================================================

        /**
         * Calculation 1: What is [A]% of [B]?
         * Result C = B * (A / 100)
         */
        function calculatePercentageOfNumber() {
            const a = parseFloat(perc_a.value) || 0;
            const b = parseFloat(perc_b.value) || 0;

            if (a === 0 && b === 0) {
                perc_result_c.textContent = '0.00';
                return;
            }

            const result = (a / 100) * b;
            perc_result_c.textContent = formatDecimal(result) || '0.00';
        }

        /**
         * Calculation 2: [X] is what percent of [Y]?
         * Result Z = (X / Y) * 100
         */
        function calculateRatioPercentage() {
            const x = parseFloat(perc_x.value) || 0;
            const y = parseFloat(perc_y.value) || 0;

            if (y === 0) {
                perc_result_z.textContent = '0.00%';
                return;
            }

            const result = (x / y) * 100;
            perc_result_z.textContent = `${formatDecimal(result) || '0.00'}%`;
        }

         /**
         * Clears all Percentage Calculator input and result fields.
         */
        function clearPercentageFields() {
            perc_a.value = '';
            perc_b.value = '';
            perc_x.value = '';
            perc_y.value = '';
            perc_result_c.textContent = '0.00';
            perc_result_z.textContent = '0.00%';
        }

        // ===================================================
        // --- UTILITIES AND STORAGE ---
        // ===================================================

        /**
         * A helper to set input value. This prevents runaway listeners
         * by only setting the value if it's different.
         */
        function setInputValue(element, value) {
            // Check for NaN or 0 and set to empty string
            if (value === 0 || isNaN(value)) {
                // Only clear if it's not the field being typed in
                if (document.activeElement !== element) {
                    element.value = '';
                }
            } else if (element.value !== String(value)) {
                element.value = value;
            }
        }
        
        /**
         * Formats decimal to a reasonable number of places, avoiding trailing zeros
         */
        function formatDecimal(num) {
            if (num === 0) return '';
            // Use parseFloat(num.toFixed(4)) to trim excess decimals and remove trailing zeros
            return parseFloat(num.toFixed(4));
        }

        /**
         * Saves the last valid total minutes to local storage.
         */
        function saveData(totalMinutes) {
            if (totalMinutes > 0) {
                localStorage.setItem(TIME_STORAGE_KEY, totalMinutes);
            } else {
                // Don't save 0 or NaN, just clear
                localStorage.removeItem(TIME_STORAGE_KEY);
            }
        }

        /**
         * Loads the last value from local storage on page load.
         */
        function loadData() {
            const savedMinutes = localStorage.getItem(TIME_STORAGE_KEY);
            if (savedMinutes) {
                const totalMinutes = parseFloat(savedMinutes);
                if (totalMinutes > 0) {
                    total_m.value = totalMinutes;
                    updateFromTotalMinutes(); // Populate all other fields
                }
            }
        }

        // Initial load
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            // Initialize percentage results
            calculatePercentageOfNumber();
            calculateRatioPercentage();
        });

    </script>
</body>
</html>
