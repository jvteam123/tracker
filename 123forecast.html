<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>123 Weather Map Integration (iFrame)</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-bg': '#1e293b',    // Slate-800 equivalent
                        'dark-card': '#334155',  // Slate-700 equivalent
                        'primary-blue': '#3b82f6', // Blue-500
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Set the map container to take up most of the viewport height */
        #windy-container {
            width: 100%;
            height: 85vh; /* Increased height for immersion */
            min-height: 450px; 
            border-radius: 1rem; /* More rounded corners */
            overflow: hidden;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5); /* Stronger, darker shadow */
            position: relative; 
            border: 2px solid #3b82f6; /* Subtle blue border for emphasis */
        }
        /* Style the iframe to fill the container */
        #windy-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body class="bg-dark-bg flex flex-col items-center p-4 sm:p-10 font-sans min-h-screen text-white">

    <div class="max-w-6xl w-full">
        <!-- Header Section -->
        <header class="text-center mb-10 p-4">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-primary-blue mb-2 tracking-tight">
                123 Forecast
            </h1>
            <p class="text-slate-400 text-lg sm:text-xl font-light italic">
                Real-time, stunning visualization powered by Windy
            </p>
        </header>

        <!-- Windy Map Container (Now holding an iframe) -->
        <div id="windy-container" class="transition-all duration-300 hover:shadow-xl">
            <iframe 
                id="windy-iframe"
                src="" 
                title="Windy Weather Map"
                loading="lazy"
            ></iframe>
        </div>

        <!-- Footer / Credits -->
        <footer class="mt-12 text-center text-sm text-slate-500">
            <p>Weather data provided by the Windy iFrame Widget, utilizing key: 
               <span class="font-mono text-xs bg-slate-700 px-1 py-0.5 rounded opacity-75">9CbzreShuP283Fr5d8cuaqUBl37zeFcv</span>
            </p>
            <p class="mt-2 text-xs">For educational and development purposes only.</p>
        </footer>
    </div>

    <!-- 
        ========================================
        IFRAME WIDGET SCRIPT
        ========================================
    -->
    <script>
        // --- API Key (still used to unlock advanced features in the iFrame) ---
        const W_API_KEY = '9CbzreShuP283Fr5d8cuaqUBl37zeFcv';

        function initializeWindyIFrame() {
            // Base URL for the Windy widget
            const baseUrl = "https://embed.windy.com/embed2.html";

            // Define map parameters (can be customized)
            const params = new URLSearchParams({
                // Required parameters
                key: W_API_KEY,               // Your API Key
                lat: 34.0522,                 // Center Latitude (Los Angeles)
                lon: -118.2437,               // Center Longitude
                zoom: 7,                      // Zoom level
                
                // Visualization and UI options
                current: 'true',              // Display current conditions
                overlay: 'wind',              // Initial overlay
                product: 'gfs',               // Forecast model
                // We show the small menu for better interaction (the user asked for more beautiful)
                menu: 'true', 
                // Colorize the UI for better aesthetic integration with dark mode
                header: 'dark', 
                
                // Other display options
                calendar: 'false',
                clouds: 'false',
                marker: 'false',
                detail: 'false',
                height: '100%',
                width: '100%',
            });

            const iframe = document.getElementById('windy-iframe');
            iframe.src = `${baseUrl}?${params.toString()}`;
            console.log("iFrame source set:", iframe.src);
        }

        // Initialize on page load
        window.onload = initializeWindyIFrame;
    </script>
</body>
</html>
